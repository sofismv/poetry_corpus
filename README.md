# Корпус стихов

## Описание корпуса
Корпус состоит из 6787 стихов Серебряного века 125 поэтов.\
Количество токенов: 46707.

Данные собираются в `scipts/scrape_poems.py`. Результат работы скрипта в `scipts/poems.json` со всеми стихами

Разделение на предложения реализовано с помощью RuSentTokenizer (DeepPavlov sentence tokenizer).\
Токенизация, лемматизация и определение грамматических значений происходит в `scipts/process.py` с помощью библиотеки Stanza.\
В сравнении на датасете стихов GramEval2020 Stanza показала одни из лучших результатов в морфлологии и токенизации.
В результате получаем два файла - `corpus.json` (сам корпус) и `index.json` (индекс по лемме для ускорения поиска). 

## Как использовать
Запустить скрипт `find_lemma.py` и подавать на вход лемму.

Формат выхода: информация о кол-ве употреблений, примеры употребления с морфологическим разбором.
![Example Image](images/input_example.png)

## Ручной разбор ошибок
Особенность этого корпуса в нестандартном употреблении слов, в устаревших словах. Также используются сложные конструкции и порядок слов не всегда прямой. В связи с этим есть ошибки в определении лемм, частей речи, связи между словами.
Разобрала несколько примеров ошибок [здесь](https://github.com/sofismv/poetry_corpus/blob/main/errors.md).

## Примеры

### Грамматическая омонимия
Тепло (есть обе части речи, но и присутствует ошибка)\
Третий пример сложный: принести (как?) тепло грамматически корректно, но смысла лишено
![Example Image](images/teplo.png)
Навстречу (здесь выявилась ошибка пайплайна):
![Example Image](images/navstrechu.png)
Пора (здесь тоже есть ошибка во втором примере):
![Example Image](images/pora.png)

### Лексическая омонимия
Лук:
![Example Image](images/luk.png)
Лавка:
![Example Image](images/lavka.png)
Наряд:
![Example Image](images/naryad.png)
### Недревесные явления (эллипсис)
Пропуск слова, понятного из контекста (другой человек):
Замечу, что "другой" связано с "заглушит" как именное подлежащее.
![Example Image](images/ellipsis_1.png)
Опущение подлежащего-местоимения (в обоих случаях - я):
![Example Image](images/ellipsis_2.png)
![Example Image](images/ellipsis_3.png)


### Референциальные цепочки
В пределах фрагмента текста:
![Example Image](images/ref_text.png)
Также нашла в пределах предложения:
![Example Image](images/ref_sentence.png)
## Итог
* У стихов сложная пунктуации, поэтому встроенные разделители предложений справлялись очень плохо, пользовалась в итоге RuSentTokenizer
* В корпусе много устаревших слов или слова употребляются нестандартно (модель скорее всего не видела эти слова и ошибочно определяла лемму и часть речи)
* В стихах предложения строятся не самым простым образов, поэтому есть ошибки в определении связей
* Модель иногда ошибается на омонимах

Несмотря на это все, модель получилась достаточно хорошая и по скорости, и по качеству.
